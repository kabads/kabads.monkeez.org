<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>dpkg</title>
<!-- 2015-06-14 Sun 18:42 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">dpkg</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Dpkg</a>
<ul>
<li><a href="#sec-1-1">1.1. Objectives</a></li>
<li><a href="#sec-1-2">1.2. Dpkg Essentials</a></li>
<li><a href="#sec-1-3">1.3. Package file names</a></li>
<li><a href="#sec-1-4">1.4. Source pacakges</a></li>
<li><a href="#sec-1-5">1.5. dpkg queries</a></li>
<li><a href="#sec-1-6">1.6. Installing/Upgrading/Uninstalling Packages</a></li>
<li><a href="#sec-1-7">1.7. </a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Dpkg</h2>
<div class="outline-text-2" id="text-1">
<p>
The linux debian package manager (dpkg) is used by all debian based linux distribtions to control installation, verification, upgrade and removal of software on linux systems. The low-level dpkg program can perform all these operation, either on just one package, or on a list of packages. Operations which would cause problems (such as removing a package that another package depends on, or installing a package when the system needs other software to be installed first) are blocked from completion. 
</p>
</div>
<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> Objectives</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li>Discuss the dpkg packaging system and its uses.
</li>
<li>Explain the naming conventions used for both binary and source deb files.
</li>
<li>Know what source packages look like.
</li>
<li>Use querying and verifying operations on packages.
</li>
<li>Install, upgrade, and uninstall debian packages. 
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> Dpkg Essentials</h3>
<div class="outline-text-3" id="text-1-2">
<p>
DPKG (debian package) is the packaging system used to install, remove and manage software packages under debian linux and other distributions derived from it. Like RPM it is not designed to directly retrieve packages in day to day use, but to install and remove them locally.
Package files have a .deb suffix and the DPKG database resides in /var/lib/dpkg directory. 
Like rpm, the dpkg program has only a partial view of the universe: it knows only what is installed on the system, and whatever it is given on the command line, but knows nothing of the other available packages whether they are in some other directory on the system or out on the Internet. As such it will also fail if a dependency is not met, or if one tries to remove a package other installed packages need. 
</p>
</div>
</div>
<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> Package file names</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Debian package file names are based on fields that represent specific information. The standard naming format for a binary package is: 
&lt;name&gt;_&lt;version&gt;-&lt;revision<sub>number</sub>&gt;_&lt;archictecture&gt;.deb
as in:
logrotate<sub>3</sub>.8.7-1<sub>amd</sub>.deb
on debian, and 
logrotate<sub>3</sub>.8.7-1ubuntu1<sub>amd64</sub>.deb
on Ubuntu. Note that for historical reasons, the 64 bit x86 version is called amd64 rather than x86<sub>64</sub>, and distributors such as ubuntu manage to insert their name in the package name. 
</p>
</div>
</div>
<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4"><span class="section-number-3">1.4</span> Source pacakges</h3>
<div class="outline-text-3" id="text-1-4">
<p>
In the debian packaging system, a source package consists of at least 3 files:
</p>
<ol class="org-ol">
<li>An upstream tarball, ending with .tar.gz. This is the unmodified source as it comes from the package maintainers.
</li>
<li>A description file, ending with .dsc, containing the package name and other metadata, such as architecture and dependencies.
</li>
<li>A second tarball that contains any patches to the upstream source, and additional files created for the package, and ends with a name .debian.tar.gz or .diff.gz, depending on distribution. 
</li>
</ol>
<p>
For example, on an ubuntu system one can download a source package as in: 
$ apt-get source logrotate
and then see what files are downloaded or created as in:
$ ls -lR logrotate* 
</p>
</div>
</div>
<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5"><span class="section-number-3">1.5</span> dpkg queries</h3>
<div class="outline-text-3" id="text-1-5">
<p>
Here are some examples of queries you can make: 
</p>
<ul class="org-ul">
<li>List all packages installed: $ dpkg -l - one can also specify a package name
</li>
<li>List files installed in the wget package: $ dpkg -L wget
</li>
<li>Show info about an installed package: $ dpkg -p wget
</li>
<li>Show info about a package file: $ dpkg -I webfs<sub>1</sub>.21+ds1-8<sub>amd64</sub>.deb
</li>
<li>List files in a package file: $ dpkg -c webfs<sub>1</sub>.21+ds1-8<sub>amd64</sub>.deb
</li>
<li>Show what package owns /etc/init/networking.conf: $ dpkg -S /etc/init/networking.conf
</li>
<li>Show the status of a package: $ dpkg -s wget
</li>
<li>Verify the installed package integrity: $ dpkg -V package
</li>
</ul>
<p>
Without arguments this will verify all packages on the system. See the man page to interpret the output (note: only recet versions of dpkg (1.17+) support this option). 
</p>
</div>
</div>
<div id="outline-container-sec-1-6" class="outline-3">
<h3 id="sec-1-6"><span class="section-number-3">1.6</span> Installing/Upgrading/Uninstalling Packages</h3>
<div class="outline-text-3" id="text-1-6">
<p>
The command: 
$ sudo dpkg -i foobar.deb
would be used for either installing or upgrading the foobar package.
If the package is not currently installed, then it will be installed. If the package is newer than the one currently installed then it will be upgraded. 
The command: 
$ sudo dpkg -r package 
is used to remove all of an insatlled package except for its configuration files. The command:
$ sudo dpkg -P package
is used to remove all of an installed package including its configuration files. (Note -P stands for purge). 
</p>
</div>
</div>
<div id="outline-container-sec-1-7" class="outline-3">
<h3 id="sec-1-7"><span class="section-number-3">1.7</span> </h3>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2015-06-14 Sun 18:42</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.5.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
