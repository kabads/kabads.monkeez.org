<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="pinterest" content="nopin">
<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
<meta name="generator" content="Hugo 0.36" />



<link rel="canonical" href="https://kabads.monkeez.org/2015/08/21/how-to-set-up-lvm-linux/">


    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/solarized_dark.min.css">
    <title>How to set-up LVM on Linux - Kabads - musings, mutterings and murmerings</title>
    
<meta name="description" content="What are the advantages of Logical Volume Management (LVM)?LVM treats your physical harddrives as &amp;lsquo;elastic&amp;rsquo; storage - that is extents can be across disks allowing filesystems to be across many disks and/or partitions. This allows a lot of flexibility and can allow filesystems to shrink or grow easily.There is a small disadvantage when using LVM - there is an overhead when reading and writing to disk - which doesn&amp;rsquo;t normally happen when writing to a normal block disk.">

<meta property="og:title" content="How to set-up LVM on Linux - Kabads - musings, mutterings and murmerings">
<meta property="og:type" content="article">
<meta property="og:url" content="https://kabads.monkeez.org/2015/08/21/how-to-set-up-lvm-linux/">
<meta property="og:image" content="https://kabads.monkeez.org/images/default.png">
<meta property="og:site_name" content="Kabads - musings, mutterings and murmerings">
<meta property="og:description" content="What are the advantages of Logical Volume Management (LVM)?LVM treats your physical harddrives as &amp;lsquo;elastic&amp;rsquo; storage - that is extents can be across disks allowing filesystems to be across many disks and/or partitions. This allows a lot of flexibility and can allow filesystems to shrink or grow easily.There is a small disadvantage when using LVM - there is an overhead when reading and writing to disk - which doesn&amp;rsquo;t normally happen when writing to a normal block disk.">
<meta property="og:locale" content="ja_JP">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="Kabads - musings, mutterings and murmerings">
<meta name="twitter:url" content="https://kabads.monkeez.org/2015/08/21/how-to-set-up-lvm-linux/">
<meta name="twitter:title" content="How to set-up LVM on Linux - Kabads - musings, mutterings and murmerings">
<meta name="twitter:description" content="What are the advantages of Logical Volume Management (LVM)?LVM treats your physical harddrives as &amp;lsquo;elastic&amp;rsquo; storage - that is extents can be across disks allowing filesystems to be across many disks and/or partitions. This allows a lot of flexibility and can allow filesystems to shrink or grow easily.There is a small disadvantage when using LVM - there is an overhead when reading and writing to disk - which doesn&amp;rsquo;t normally happen when writing to a normal block disk.">
<meta name="twitter:image" content="https://kabads.monkeez.org/images/default.png">


<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "NewsArticle",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id":"https://kabads.monkeez.org/"
    },
    "headline": "How to set-up LVM on Linux - Kabads - musings, mutterings and murmerings",
    "image": {
      "@type": "ImageObject",
      "url": "https://kabads.monkeez.org/images/default.png",
      "height": 800,
      "width": 800
    },
    "datePublished": "2015-08-21T00:00:00JST",
    "dateModified": "2015-08-21T00:00:00JST",
    "author": {
      "@type": "Person",
      "name": "Kabads - musings, mutterings and murmerings"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Kabads - musings, mutterings and murmerings",
      "logo": {
        "@type": "ImageObject",
        "url": "https://kabads.monkeez.org/images/logo.png",
        "width": 600,
        "height": 60
      }
    },
    "description": "What are the advantages of Logical Volume Management (LVM)?
LVM treats your physical harddrives as &lsquo;elastic&rsquo; storage - that is extents can be across disks allowing filesystems to be across many disks and/or partitions. This allows a lot of flexibility and can allow filesystems to shrink or grow easily.
There is a small disadvantage when using LVM - there is an overhead when reading and writing to disk - which doesn&rsquo;t normally happen when writing to a normal block disk."
  }
</script>


    <link href="https://kabads.monkeez.org/css/styles.css" rel="stylesheet">
    

  </head>

  <body>
    
    
    

    <header class="l-header">
      <nav class="navbar navbar-default">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://kabads.monkeez.org/">Kabads - musings, mutterings and murmerings</a>
          </div>

          

        </div>
      </nav>
    </header>

    <main>
      <div class="container">
        
<div class="row">
  <div class="col-md-8">

    <nav class="p-crumb">
      <ol class="breadcrumb">
        <li><a href="https://kabads.monkeez.org/"><i class="fa fa-home" aria-hidden="true"></i></a></li>
        
        <li itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="https://kabads.monkeez.org/post/" itemprop="url"><span itemprop="title">post</span></a></li>
        
        <li class="active">How to set-up LVM on Linux</li>
      </ol>
    </nav>

    <article class="single">
  <header>
    <ul class="p-facts">
      <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2015-08-21T00:00:00JST">Aug 21, 2015</time></li>
      <li><i class="fa fa-bookmark" aria-hidden="true"></i><a href="https://kabads.monkeez.org/post/">post</a></li>
      
    </ul>

    <h1 class="title">How to set-up LVM on Linux</h1>
  </header>

  

  <div class="article-body"><p><a data-flickr-embed="true" data-header="false" data-footer="false" data-context="false"  href="https://www.flickr.com/photos/kabads/20580819929/in/datetaken-public/" title="hard-disk-775847_1280"><img src="https://farm1.staticflickr.com/606/20580819929_7109d8f28b_m.jpg") width="240" height="160" alt="hard-disk-775847_1280"></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>

<p><strong>What are the advantages of <a href="https://en.wikipedia.org/wiki/Logical_volume_management">Logical Volume Management (LVM)</a>?</strong></p>

<p>LVM treats your physical harddrives as &lsquo;elastic&rsquo; storage - that is extents can be across disks allowing filesystems to be across many disks and/or partitions. This allows a lot of flexibility and can allow filesystems to shrink or grow easily.</p>

<p>There is a small disadvantage when using LVM - there is an overhead when reading and writing to disk - which doesn&rsquo;t normally happen when writing to a normal block disk.</p>

<p>So, how do you set up LVM? I suggest you learn using a <a href="https://www.virtualbox.org/">virtual machine</a> - this post  will cover <a href="http://www.ubuntu.com/download/server">Ubuntu 14.04 server edition</a>.</p>

<p>The server will need the package lvm2 installed</p>

<pre><code>$ sudo apt-get install lvm2
</code></pre>

<p>Firstly, set up your partitions with type 8e - this will be done with fdisk - type &rsquo;t&rsquo; and then choose the partition number and then type 8e - this is an LVM type partition. This needs to happen for all the partitions that will be included in the LVM device.</p>

<pre><code>$ sudo fdisk /dev/sda
</code></pre>

<p>After creating the new partitions you will need to do one of a couple of things so that the kernel can see them - reboot or run partprobe. Without this, the kernel won&rsquo;t see the newly created partitions and you will not be able to work on them further. It&rsquo;s at this point that one usually creates a filesystem on these partitions. When setting up LVM, this is not yet the case.</p>

<p>Then run these commands to create physical volumes:</p>

<pre><code>$ sudo pvcreate /dev/sda3
Physical volume &quot;/dev/sda3&quot; successfully created

$ sudo pvcreate /dev/sda4
Physical volume &quot;/dev/sda3&quot; successfully created

$ sudo pvdisplay
</code></pre>

<p>will show you all the physical volumes that are available to LVM.</p>

<p>This command  will create a virtual group.</p>

<pre><code>$ sudo vgcreate mylvm /dev/sda3 /dev/sda4
Volume group &quot;mylvm&quot; successfully created


$ sudo vgdisplay
</code></pre>

<p>will show you the newly created volume group.</p>

<p>Now, for the final key part - creating the logical volume:</p>

<pre><code>$ sudo lvcreate --name myfilesystem --size 1G mylvm
Logical volume &quot;myfilesystem&quot; created

$ sudo lvdisplay
</code></pre>

<p>will show you the logical volume filesystem that has been created (although it doesn&rsquo;t yet have a filesystem on it). The next step will do that.</p>

<pre><code>$ sudo mkfs.ext3 /dev/mylvm/myfilesystem
</code></pre>

<p>Now this filesystem can be mounted like any other filesystem and written to:</p>

<pre><code>$ sudo mkdir /mnt/lvmdrive
$ sudo mount /dev/mylvm/myfilesystem /mnt/lvmdrive
</code></pre>

<p>Once you have sorted out permissions for this drive you will be able to write to it.</p>

<pre><code>$ chmod -R 777 /mnt/lvmdrive
</code></pre>
</div>

  <footer class="article-footer">
    
    
    
    <section class="bordered">
      <header>
        <div class="panel-title">CATEGORIES</div>
      </header>
      <div>
        <ul class="p-terms">
          
          <li><a href="https://kabads.monkeez.org/categories/sysadmin/">sysadmin</a></li>
          
        </ul>
      </div>
    </section>
    
    
    
    
  </footer>

</article>


    
  </div>

  <div class="col-md-4">
    
<aside class="l-sidebar">

  <section class="panel panel-default">
    <div class="panel-heading">
      <div class="panel-title">LATESTS</div>
    </div>
    <div class="list-group">
      
      <a href="https://kabads.monkeez.org/post/2018-02-11-cycle-jaunt-around-bath/" class="list-group-item">2018 02 11 Cycle Jaunt Around Bath</a>
      
      <a href="https://kabads.monkeez.org/2017/10/03/aws-how-to-automatically-launch-apache-with-your-site-content/" class="list-group-item">How to create an instance that pulls your website content automatically</a>
      
      <a href="https://kabads.monkeez.org/2017/09/20/how-to-create-a-vpc/" class="list-group-item">AWS - How to Create A VPC</a>
      
      <a href="https://kabads.monkeez.org/2017/09/20/aws-how-to-serve-traffic-from-load-balancer/" class="list-group-item">AWS - How to Serve Traffic from a Load Balancer</a>
      
      <a href="https://kabads.monkeez.org/2017/07/02/swindon-to-goring-walk/" class="list-group-item">TADS walk Swindon to Goring</a>
      
      <a href="https://kabads.monkeez.org/2017/06/10/how-to-install-lineageos-wileyfox-swift/" class="list-group-item">How to install LineageOS on Wileyfox Swift</a>
      
      <a href="https://kabads.monkeez.org/2017/05/06/a-cartoon-about-file-permissions/" class="list-group-item">A Cartoon About File Permissions</a>
      
      <a href="https://kabads.monkeez.org/2017/01/29/setting-up-lets-encrypt-with-certauto/" class="list-group-item">Setting up SSL Certificates with Lets Encrypt and certbot</a>
      
      <a href="https://kabads.monkeez.org/2016/12/10/running-ec2-instance/" class="list-group-item">Running EC2 Instance</a>
      
      <a href="https://kabads.monkeez.org/2016/11/20/finding-large-files-in-a-directory/" class="list-group-item">Finding large files in a directory</a>
      
    </div>
  </section>

  
  <section class="panel panel-default">
    <div class="panel-heading">
      <div class="panel-title">CATEGORY</div>
    </div>
    <div class="list-group">
      
      <a href="https://kabads.monkeez.org/categories/sysadmin" class="list-group-item">sysadmin</a>
      
      <a href="https://kabads.monkeez.org/categories/cycling" class="list-group-item">cycling</a>
      
      <a href="https://kabads.monkeez.org/categories/education" class="list-group-item">education</a>
      
      <a href="https://kabads.monkeez.org/categories/exercise" class="list-group-item">exercise</a>
      
      <a href="https://kabads.monkeez.org/categories/leisure" class="list-group-item">leisure</a>
      
      <a href="https://kabads.monkeez.org/categories/reading" class="list-group-item">reading</a>
      
      <a href="https://kabads.monkeez.org/categories/tech" class="list-group-item">tech</a>
      
    </div>
  </section>
  
  <section class="panel panel-default">
    <div class="panel-heading">
      <div class="panel-title">TAG</div>
    </div>
    <div class="list-group">
      
      <a href="https://kabads.monkeez.org/tags/ict" class="list-group-item">ict</a>
      
    </div>
  </section>
  

</aside>


  </div>
</div>

      </div>
    </main>

    <footer class="l-footer">
      <div class="container">
        <p><span class="h-logo">&copy; Kabads - musings, mutterings and murmerings</span></p>
        <aside>
          <p>Powered by <a href="https://gohugo.io/">Hugo</a>.</p>
          <p><a href="https://github.com/dim0627/hugo_theme_beg">Beg</a> designed by <a href="http://yet.unresolved.xyz/">Daisuke Tsuji</a>.</p>
        </aside>
      </div>
    </footer>

    <script src="//code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

